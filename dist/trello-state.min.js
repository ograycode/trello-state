!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.trelloState=e():t.trelloState=e()}(this,function(){return function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={on:function(t,e){var a=[];return t.forEach(function(t){var r=JSON.parse(JSON.stringify(t));r.actions.forEach(function(t){if(e<new Date(Date.parse(t.date))&&t.data.old)for(var a in t.data.old)r[a]=t.data.old[a]}),r.actions=r.actions.filter(function(t){return e>new Date(Date.parse(t.date))}),r.actions.length>0&&a.push(r)}),a},cycleTime:function(t,e,a){var r=this,n=void 0,o=void 0;return e.forEach(function(e){var a=r.findLast(t,e);(!n&&a||a>n)&&(n=a)}),a.forEach(function(e){var a=r.findEarliest(t,e);(!o&&a||a<o)&&(o=a)}),n&&o?Math.abs(n.getTime()-o.getTime()):-1},findEarliest:function(t,e){var a=void 0,r=!1;return t.actions.forEach(function(t){var n=new Date(Date.parse(t.date));"createCard"===t.type&&r?(r=!1,a=n):"updateCard"===t.type&&(t.data.listBefore&&t.data.listBefore.id===e?r=!0:t.data.listAfter&&t.data.listAfter.id===e&&(!a||a>n)&&(a=n))}),a},findLast:function(t,e){var a=void 0,r=!1;return t.actions.forEach(function(t){var n=new Date(Date.parse(t.date));"createCard"===t.type&&r?(r=!1,(!a||a<n)&&(a=n)):"updateCard"===t.type&&(t.data.listAfter&&t.data.listAfter.id===e?((!a||a<n)&&(a=n),r=!1):t.data.listBefore.id===e&&(r=!0))}),a}}}])});
//# sourceMappingURL=trello-state.min.js.map
